<div class="tab-content {{#if (eq activeTab 'skills')}}active{{/if}}">
  <div class="skills-list">
    {{#each system.skills as |skill key|}}
    <div class="skill-item">
      
      <div class="skill-name">
        <a data-action="rollSkill" data-key="{{key}}">{{skill.label}}</a>
      </div>

      <div class="skill-attr">
        <select name="system.skills.{{key}}.attr" style="width: 60px; font-size: 0.8em;">
            {{selectOptions ../attrOptions selected=skill.attr}}
        </select>
      </div>

      <div class="skill-controls">
        {{#if @root.system.editMode}}
            {{!-- EDIT MODE: Input Field (Added style to prevent layout blowout) --}}
            <input type="number" name="system.skills.{{key}}.value" value="{{skill.value}}" style="width: 30px; text-align: center;"/>
        
        {{else}}
            {{!-- PLAY MODE: Text + XP Button --}}
            <span style="font-weight: bold; margin-right: 5px;">{{skill.value}}</span>
            
            {{#if (gt @root.system.experience.unspent 0)}}
                <a data-action="spendXP" data-type="skill" data-key="{{key}}" title="Raise Skill">
                    <i class="fas fa-plus-circle" style="color: var(--cw-success);"></i>
                </a>
            {{/if}}
        {{/if}}

        {{!-- Specialization Toggle --}}
        <a class="specialized-toggle {{#if skill.specialized}}active{{/if}}" 
           data-action="toggleSpecialized" data-key="{{key}}"
           title="Toggle Specialization">
          <i class="fa-solid fa-star"></i>
        </a>
      </div>
      
    </div> {{!-- <--- This closing DIV was missing! --}}
    {{/each}}
  </div>
</div>